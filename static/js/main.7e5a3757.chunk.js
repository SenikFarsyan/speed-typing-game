(this["webpackJsonptask-webb-fontaine"]=this["webpackJsonptask-webb-fontaine"]||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/loader.a21746f5.gif"},34:function(e,t,n){e.exports=n(52)},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(14),c=n.n(s),o=n(12),l=n(3),u=n(8),i=n(24),m=n(9),f="SIGN_IN_SUCCESS",p="SIGN_IN_FAILURE",d="CHECK_USER_SESSION",h="SIGN_OUT_SUCCESS",E="SIGN_UP_SUCCESS",g="SIGN_UP_FAILURE",v="GET_ALL_USERS",b="SAVE_USER_SCORE",y={currentUser:null,users:null,messages:{}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(m.a)({},e,{users:t.users});case E:return Object(m.a)({},e,{users:t.users,messages:{error:null,success:"Successfully signed up, now you can log in"}});case g:return Object(m.a)({},e,{messages:{error:t.error,success:null}});case f:return Object(m.a)({},e,{currentUser:t.user,messages:{}});case p:return Object(m.a)({},e,{messages:{error:t.error,success:null}});case h:return sessionStorage.removeItem("user"),Object(m.a)({},e,{currentUser:null});case d:var n=null;return n=sessionStorage.user?JSON.parse(sessionStorage.user):null,Object(m.a)({},e,{currentUser:n});case b:return Object(m.a)({},e,{users:t.users});default:return e}},S=Object(u.c)({user:L}),O=[i.a],j=Object(u.e)(S,Object(u.d)(u.a.apply(void 0,O),u.d)),N=(n(43),n(2)),w=n(10),x=n(31),U="https://api.myjson.com/bins/oty2u",C=function(e){return e.user},I=Object(N.a)([C],(function(e){return e.currentUser})),k=Object(N.a)([C],(function(e){var t=[];return e.users&&e.users.forEach((function(e){e.history.forEach((function(n){t.push({name:e.name,score:n.score,date:n.date})}))})),t})),Q=Object(N.a)([C],(function(e){return e.currentUser?e.currentUser.history:[]})),M=Object(N.a)([C],(function(e){return e.messages}));function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var T=a.a.createElement("defs",null,a.a.createElement("filter",{id:"editing-extrude-glow"},a.a.createElement("feFlood",{floodColor:"#333333",result:"flood-1"}),a.a.createElement("feMorphology",{operator:"erode",radius:1,in:"SourceAlpha",result:"erode"}),a.a.createElement("feComposite",{operator:"in",in:"flood-1",in2:"erode",result:"comp1"}),a.a.createElement("feConvolveMatrix",{order:"3,3",divisor:1,in:"comp1",result:"convolve",kernelMatrix:"0 0 0 1 1 1 0 0 0"}),a.a.createElement("feOffset",{dx:-3,dy:0,in:"convolve",result:"extrude"}),a.a.createElement("feComposite",{operator:"in",in:"flood-1",in2:"extrude",result:"comp-extrude"}),a.a.createElement("feFlood",{floodColor:"#000000",result:"flood-2"}),a.a.createElement("feComposite",{operator:"in",in:"flood-2",in2:"SourceAlpha",result:"comp2"}),a.a.createElement("feMorphology",{operator:"dilate",radius:1,in:"comp2",result:"dilate"}),a.a.createElement("feOffset",{dx:-4.5,dy:0,in:"dilate",result:"offset"}),a.a.createElement("feGaussianBlur",{in:"offset",stdDeviation:5.8,result:"blur"}),a.a.createElement("feComponentTransfer",{in:"blur",result:"shadow"},a.a.createElement("feFuncA",{type:"linear",slope:.8,intercept:-.2})),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",{in:"shadow"}),a.a.createElement("feMergeNode",{in:"comp-extrude"}),a.a.createElement("feMergeNode",{in:"SourceGraphic"})))),D=a.a.createElement("g",{filter:"url(#editing-extrude-glow)"},a.a.createElement("g",{transform:"translate(169.13500452041626, 97.36999893188477)"},a.a.createElement("path",{d:"M2.69-39.68L2.69-39.68L2.69-39.68Q3.58-41.47 5.54-42.46L5.54-42.46L5.54-42.46Q7.49-43.46 10.18-43.46L10.18-43.46L10.18-43.46Q14.40-43.46 16.93-40.42L16.93-40.42L16.93-40.42Q19.46-37.38 19.46-30.72L19.46-30.72L19.46-7.87L34.11-42.18L41.66-42.18L43.39-9.79L43.20-7.94L58.43-42.18L67.20-42.18L46.72 0L33.09 0L31.81-19.46L23.36 0L7.94 0L6.02-30.72L6.02-30.72Q5.82-34.18 4.90-36.45L4.90-36.45L4.90-36.45Q3.97-38.72 2.69-39.68ZM89.47-42.69L89.47-42.69L89.47-42.69Q105.15-42.69 105.15-31.62L105.15-31.62L105.15-31.62Q105.15-25.54 101.25-21.89L101.25-21.89L101.25-21.89Q97.41-18.24 90.69-18.24L90.69-18.24L90.69-18.24Q87.55-18.24 85.12-20.03L85.12-20.03L85.12-20.03Q83.97-20.80 83.20-21.82L83.20-21.82L83.20-21.82Q87.87-21.82 90.34-24.67L90.34-24.67L90.34-24.67Q92.80-27.52 92.80-33.09L92.80-33.09L92.80-33.09Q92.80-38.66 87.30-38.66L87.30-38.66L85.76-38.66L85.76-38.66Q85.38-38.66 85.06-38.59L85.06-38.59L77.70 0L63.81 0L71.68-41.92L71.68-41.92Q78.53-42.56 82.50-42.62L82.50-42.62L82.50-42.62Q86.46-42.69 89.47-42.69ZM110.91 0L103.55 0L115.14-42.24L128.51-42.24L131.46-18.11L143.36-42.24L154.56-42.24L155.71-10.62L155.71-10.62Q155.97-4.35 159.04-2.43L159.04-2.43L159.04-2.43Q158.34-1.15 156.29 0.06L156.29 0.06L156.29 0.06Q154.24 1.28 151.52 1.28L151.52 1.28L151.52 1.28Q148.80 1.28 147.20 0.51L147.20 0.51L147.20 0.51Q145.60-0.26 144.70-1.54L144.70-1.54L144.70-1.54Q143.10-3.84 143.10-8.26L143.10-8.26L143.10-28.03L130.50 0L122.56 0L118.08-28.74L110.91 0Z",fill:"#eb6c6c"}))),A=a.a.createElement("style",null,"text {\n  font-size: 64px;\n  font-family: Arial Black;\n  dominant-baseline: central;\n  text-anchor: middle;\n}"),G=function(e){var t=e.svgRef,n=e.title,r=R(e,["svgRef","title"]);return a.a.createElement("svg",_({width:"238.57748413085938px",height:"120.8099609375px",viewBox:"130.7112579345703 14.595019531250003 238.57748413085938 120.8099609375",style:{background:"rgba(0, 0, 0, 0)"},preserveAspectRatio:"xMidYMid",ref:t},r),n?a.a.createElement("title",null,n):null,T,D,A)},P=a.a.forwardRef((function(e,t){return a.a.createElement(G,_({svgRef:t},e))})),Y=(n.p,n(44),Object(N.b)({currentUser:I})),F={signOut:function(){return{type:h}}},J=Object(l.b)(Y,F)((function(e){var t=e.currentUser,n=e.signOut;return a.a.createElement("div",{className:"header-container"},a.a.createElement(o.b,{className:"logo-container",to:"/"},a.a.createElement(P,{className:"logo"})),a.a.createElement("div",{className:"options-container"},t?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.b,{className:"option-link",to:"/history"},"History"),a.a.createElement("div",{className:"option-link",onClick:n},"Sign Out")):a.a.createElement("div",{className:"option-link",to:"signin"},"SIGN IN")))})),H=n(26),B=n(27),Z=n(32),q=n(28),W=n(33),z=(n(46),function(e){var t=e.text,n=e.userInput,r=t.split("");return a.a.createElement("div",{className:"text-sample"},r.map((function(e,t){var r;return t<n.length&&(r=e===n[t]?"yellow":"red"),a.a.createElement("span",{key:t,style:{backgroundColor:r}},e)})))}),K=function(e){var t=e.wpm;return t?a.a.createElement("div",null,t," wpm"):null},V=n(16),X=n.n(V),$=(n(48),Object(N.b)({usersScores:k})),ee=Object(l.b)($)((function(e){var t=e.usersScores;return t?a.a.createElement("div",{className:"scores-container"},a.a.createElement("h3",null,"Top 5 high scores"),a.a.createElement("ol",{className:"scores-list"},t.sort((function(e,t){return t.score-e.score})).slice(0,5).map((function(e){return a.a.createElement("li",{key:e.date,className:"score"},a.a.createElement("span",null,e.name),a.a.createElement("span",null,e.score," wpm"),a.a.createElement("span",null,X()(new Date(e.date),"YYYY.MM.DD").fromNow()))})))):null})),te=(n(49),n(29)),ne=n.n(te),re={text:"",userInput:"",correctSymbols:0,seconds:0,started:!1,finished:!1,error:!1,wpm:0},ae=function(e){function t(e){var n;return Object(H.a)(this,t),(n=Object(Z.a)(this,Object(q.a)(t).call(this,e))).getDumyText=function(){fetch("https://baconipsum.com/api/?type=all-meat&sentences=2&start-with-lorem=1").then((function(e){return e.json()})).then((function(e){return n.setState({text:e.join("")})})).catch((function(e){return console.log(e)}))},n.onRestart=function(){n.setState(re),n.getDumyText()},n.handleInputChange=function(e){var t=e.target.value,r=n.state.userInput.length;t[r]===n.state.text[r]?(n.setTimer(),n.setState({userInput:t,correctSymbols:n.countCorrectSymbols(t),error:!1})):n.setState({error:!0})},n.calcWPM=function(){var e=n.state,t=e.correctSymbols,r=e.seconds;if(0!==t&&0!==r){var a=t/5/(r/60);n.setState({wpm:Math.floor(a)})}},n.state=re,n}return Object(W.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.getDumyText()}},{key:"countCorrectSymbols",value:function(e){var t=this.state.text.replace(" ","");return e.replace(" ","").split("").filter((function(e,n){return e===t[n]})).length}},{key:"onFinish",value:function(e){if(e.length===this.state.text.length||this.state.seconds>180){clearInterval(this.interval);var t=JSON.parse(sessionStorage.getItem("user"));t.history.push({score:this.state.wpm,date:Date.now()}),this.props.saveUserScore(t),sessionStorage.setItem("user",JSON.stringify(t)),this.setState({finished:!0})}}},{key:"setTimer",value:function(){var e=this;this.state.started||(this.setState({started:!0}),this.interval=setInterval((function(){e.setState((function(e){return{seconds:e.seconds+1}}),(function(){e.calcWPM(),e.onFinish(e.state.userInput)}))}),1e3))}},{key:"render",value:function(){var e=this.state,t=e.text,n=e.userInput,r=e.wpm,s=e.finished,c=e.error;return t?a.a.createElement("div",{className:"home-container"},a.a.createElement(ee,null),a.a.createElement("div",{className:"game-container"},a.a.createElement("h3",null,"Start typing and the game will begin!"),a.a.createElement(z,{text:t,userInput:n}),a.a.createElement("textarea",{cols:"30",rows:"5",className:"user-input ".concat(c?"wrong-letter":""),value:n,onChange:this.handleInputChange,placeholder:"Start typing here...",readOnly:s}),a.a.createElement(K,{wpm:r}),s&&a.a.createElement("div",{className:"finish-game"},a.a.createElement("p",null,"Game was finished, your score is ",r," wpm")),a.a.createElement("div",{className:"text-right"},a.a.createElement("button",{className:"button",onClick:this.onRestart},"Restart")))):a.a.createElement("div",{className:"loader"},a.a.createElement("img",{src:ne.a,alt:"loader"}))}}]),t}(a.a.PureComponent),se={saveUserScore:function(e){return function(t,n){var r,a=n().user.users;a.forEach((function(t,n){t.name===e.name&&(r=n)})),a[r].history=e.history,fetch(U,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(){t({type:b,users:a})})).catch((function(e){return console.log(e)}))}}},ce=Object(l.b)(null,se)(ae),oe=n(30);n(50);function le(e){var t=Object(r.useState)(e),n=Object(oe.a)(t,2),a=n[0],s=n[1];return{value:a,onChange:function(e){s(e.target.value)}}}var ue=Object(N.b)({messages:M}),ie={registerUser:function(e){return function(t,n){var r=n(),a="";if(r.user.users.forEach((function(t){t.name===e.name&&(a="The name is already in use!")})),a)t({type:g,error:a});else{var s=[].concat(Object(x.a)(r.user.users),[e]);fetch(U,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(){t({type:E,users:s})})).catch((function(e){return console.log(e)}))}}},signinUser:function(e){return function(t,n){var r=n(),a=null;return r.user.users.forEach((function(t){t.name===e.name&&t.password===e.password&&(a=t)})),a?(sessionStorage.setItem("user",JSON.stringify(a)),t({type:f,user:a})):t({type:p,error:"User is not found"})}}},me=Object(l.b)(ue,ie)((function(e){var t=e.signinUser,n=e.registerUser,r=e.messages,s=le(""),c=le(""),o=function(e){e.preventDefault();var r={name:s.value,password:c.value,history:[]};"signin"===e.target.name?t(r):n(r)};return a.a.createElement("div",{className:"sign-in-and-sign-up"},a.a.createElement("h3",null,"Sign in and Sign up page"),a.a.createElement("form",{className:"form"},a.a.createElement("input",Object.assign({type:"text",required:!0,placeholder:"name"},s)),a.a.createElement("input",Object.assign({type:"password",required:!0,placeholder:"password"},c)),a.a.createElement("div",{className:"buttons-container"},a.a.createElement("input",{type:"button",name:"register",value:"Register",onClick:o}),a.a.createElement("input",{type:"button",name:"signin",value:"Signin",onClick:o}))),a.a.createElement("div",{className:"".concat(r.error?"error-message":"success-message"," ")},a.a.createElement("p",null,r.error),a.a.createElement("p",null,r.success)))})),fe=(n(51),Object(N.b)({userHistory:Q})),pe=Object(l.b)(fe)((function(e){var t=e.userHistory;return t.length>1?a.a.createElement("div",{className:"container"},a.a.createElement("h3",null,"Here are your scores"),a.a.createElement("ol",{className:"history-list"},t.sort((function(e,t){return t.score-e.score})).map((function(e){return a.a.createElement("li",{key:e.date},a.a.createElement("span",null,e.score," wpm")," ",a.a.createElement("span",null,X()(new Date(e.date),"YYYY.MM.DD").fromNow()))})))):a.a.createElement("div",{className:"container"},a.a.createElement("p",null,"You have not played yet"))}));var de=Object(N.b)({currentUser:I}),he={getAllUsers:function(){return function(e,t){fetch(U).then((function(e){return e.json()})).then((function(t){e({type:v,users:t})})).catch((function(e){return console.log(e)}))}},checUserSession:function(){return{type:d}}},Ee=Object(l.b)(de,he)((function(e){var t=e.getAllUsers,n=e.currentUser,s=e.checUserSession;return Object(r.useEffect)((function(){t(),s()}),[s,t]),a.a.createElement("div",null,a.a.createElement(J,null),a.a.createElement(w.d,null,a.a.createElement(w.b,{exact:!0,path:"/",render:function(){return n?a.a.createElement(ce,null):a.a.createElement(w.a,{to:"/signin"})}}),a.a.createElement(w.b,{path:"/signin",render:function(){return n?a.a.createElement(w.a,{to:"/"}):a.a.createElement(me,null)}}),a.a.createElement(w.b,{path:"/history",render:function(){return n?a.a.createElement(pe,null):a.a.createElement(w.a,{to:"/signin"})}})))}));c.a.render(a.a.createElement(l.a,{store:j},a.a.createElement(o.a,null,a.a.createElement(Ee,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.7e5a3757.chunk.js.map